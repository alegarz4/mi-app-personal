<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mi App Personal</title>

<link rel="manifest" href="manifest.webmanifest">
<meta name="theme-color" content="#0b1224">

<style>
:root{
 --bg:#0b1224;
 --card:#101a33;
 --text:#e5e7eb;
 --muted:#9ca3af;
 --btn:#22c55e;
 --btn2:#60a5fa;
}
body{
 margin:0;
 font-family: system-ui, Arial;
 background:var(--bg);
 color:var(--text);
}
.container{
 max-width:520px;
 margin:auto;
 padding:16px;
}
.card{
 background:var(--card);
 border-radius:16px;
 padding:16px;
 margin-bottom:16px;
}
h1,h2{
 margin:0 0 8px 0;
}
label{
 display:block;
 margin-top:8px;
 color:var(--muted);
}
input,select,textarea{
 width:100%;
 padding:10px;
 border-radius:10px;
 border:none;
 margin-top:4px;
 background:#0f172a;
 color:white;
}
button{
 width:100%;
 margin-top:12px;
 padding:14px;
 border:none;
 border-radius:12px;
 background:var(--btn);
 color:#052e16;
 font-weight:700;
 font-size:15px;
}
button.alt{
 background:var(--btn2);
 color:#022c44;
}
small{
 color:var(--muted);
}
.quote{
 text-align:center;
 font-style:italic;
}
.time{
 text-align:center;
 font-size:18px;
 font-weight:700;
}
</style>
</head>
<body>

<div class="container">

<h1>Mi App Personal</h1>

<div class="card">
<h2>쮺칩mo me siento?</h2>
<select id="mood">
<option>Tranquila</option>
<option>Ansiosa</option>
<option>Triste</option>
<option>Confundida</option>
<option>En calma</option>
<option>Esperanzada</option>
</select>

<label>쯈u칠 pensamiento domina?</label>
<textarea id="thought"></textarea>

<button onclick="saveEntry()">Guardar registro</button>
</div>

<div class="card">
<h2>칔ltima llamada</h2>
<input type="datetime-local" id="lastCall">
<button class="alt" onclick="saveLastCall()">Guardar hora</button>
<p class="time" id="containTime"></p>
</div>

<div class="card">
<h2>Frase para ti</h2>
<p class="quote" id="quote"></p>
<button class="alt" onclick="newQuote()">Otra frase</button>
</div>

<div class="card">
<h2>Respaldo</h2>
<button onclick="exportData()">Exportar datos</button>
<button class="alt" onclick="importData()">Importar datos</button>
<input type="file" id="fileInput" style="display:none">
</div>

</div>

<script>
const quotes=[
"Respira, ya est치s haciendo lo mejor que puedes.",
"No tienes que tener todo resuelto hoy.",
"Eres m치s fuerte de lo que sientes ahora.",
"Tu valor no depende de nadie m치s.",
"Aqu칤 est치s, y eso ya es valent칤a."
];

function newQuote(){
 document.getElementById("quote").innerText=
 quotes[Math.floor(Math.random()*quotes.length)];
}

function saveEntry(){
 const data=JSON.parse(localStorage.getItem("entries")||"[]");
 data.push({
  date:new Date().toISOString(),
  mood: mood.value,
  thought: thought.value
 });
 localStorage.setItem("entries",JSON.stringify(data));
 alert("Guardado 游밼");
 thought.value="";
}

function saveLastCall(){
 localStorage.setItem("lastCall", lastCall.value);
 updateContain();
}

function updateContain(){
 const v=localStorage.getItem("lastCall");
 if(!v){containTime.innerText="";return;}
 const diff=Math.floor((Date.now()-new Date(v))/60000);
 containTime.innerText="Contenci칩n: "+diff+" minutos";
}

function exportData(){
 const blob=new Blob([JSON.stringify(localStorage)],{type:"application/json"});
 const a=document.createElement("a");
 a.href=URL.createObjectURL(blob);
 a.download="mi_app_respaldo.json";
 a.click();
}

function importData(){
 fileInput.click();
}

fileInput.onchange=e=>{
 const reader=new FileReader();
 reader.onload=()=>{
  const data=JSON.parse(reader.result);
  for(let k in data){localStorage.setItem(k,data[k]);}
  alert("Datos restaurados 游밼");
  updateContain();
 };
 reader.readAsText(e.target.files[0]);
}

function load(){
 newQuote();
 updateContain();
 lastCall.value=localStorage.getItem("lastCall")||"";
}

load();

if ("serviceWorker" in navigator) {
 window.addEventListener("load", () => {
  navigator.serviceWorker.register("./sw.js").catch(()=>{});
 });
}
</script>

</body>
</html>
