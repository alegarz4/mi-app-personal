<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mi App Personal</title>

<link rel="manifest" href="manifest.webmanifest">

<style>
:root{
  --bg:#0b1224;
  --card:#101a33;
  --text:#f8fafc;
  --muted:#a8b3cf;
  --btn:#1c2a4d;
  --good:#22c55e;
  --save:#4ade80;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
}

.container{
  max-width:520px;
  margin:auto;
  padding:16px;
}

h1{
  font-size:28px;
  margin-bottom:16px;
}

.card{
  background:var(--card);
  border-radius:16px;
  padding:16px;
  margin-bottom:18px;
  border:1px solid rgba(255,255,255,.08);
}

h2{
  margin-top:0;
}

select,textarea,input{
  width:100%;
  padding:12px;
  margin-top:8px;
  border-radius:12px;
  border:none;
  background:#0f172a;
  color:var(--text);
}

button{
  width:100%;
  padding:14px;
  margin-top:12px;
  border-radius:12px;
  border:none;
  font-size:16px;
  font-weight:700;
  background:var(--btn);
  color:var(--text);
}

.save{background:var(--save); color:#052e16;}
.good{background:var(--good); color:#052e16;}

.small{
  font-size:14px;
  color:var(--muted);
  margin-top:6px;
}

.center{text-align:center}
</style>
</head>
<body>

<div class="container">

<h1>Mi App Personal</h1>

<div class="card">
  <h2>¿Cómo me siento?</h2>
  <select id="mood">
    <option>Tranquila</option>
    <option>Ansiosa</option>
    <option>Triste</option>
    <option>Indiferente</option>
    <option>En paz</option>
    <option>Confundida</option>
  </select>

  <textarea id="thought" placeholder="¿Qué pensamiento domina?"></textarea>

  <button class="save" onclick="saveMood()">Guardar registro</button>
</div>

<div class="card">
  <h2>Él me llamó</h2>

  <label>Fecha y hora</label>
  <input type="datetime-local" id="callTime">

  <label>Duración (minutos)</label>
  <input type="number" id="callDuration" placeholder="Ej. 12">

  <button onclick="saveCall()">Guardar llamada</button>

  <div class="small" id="lastCallInfo"></div>
</div>

<div class="card">
  <h2>Frase para ti</h2>
  <p id="quote" class="center"></p>
  <button onclick="newQuote()">Otra frase</button>
</div>

<div class="card">
  <h2>Resumen</h2>
  <div id="summary"></div>
</div>

<div class="card">
  <h2>Respaldo</h2>
  <button class="good" onclick="exportData()">Exportar datos</button>
  <button onclick="importData()">Importar datos</button>
  <input type="file" id="fileInput" hidden>
</div>

</div>

<script>
let data = JSON.parse(localStorage.getItem("appData")) || {
  moods:[],
  calls:[]
};

const quotes = [
 "Respira, ya estás haciendo lo mejor que puedes.",
 "No tienes que tener todo resuelto hoy.",
 "Tu proceso es válido.",
 "Estás aprendiendo a cuidarte.",
 "Eres más fuerte de lo que crees."
];

function saveMood(){
  data.moods.push({
    date:new Date().toISOString(),
    mood:mood.value,
    thought:thought.value
  });
  thought.value="";
  save();
}

function saveCall(){
  data.calls.push({
    time:callTime.value,
    duration:callDuration.value
  });
  callTime.value="";
  callDuration.value="";
  save();
}

function save(){
  localStorage.setItem("appData",JSON.stringify(data));
  updateUI();
}

function newQuote(){
  quote.textContent = quotes[Math.floor(Math.random()*quotes.length)];
}

function updateUI(){
  if(data.calls.length){
    let c = data.calls[data.calls.length-1];
    lastCallInfo.textContent = `Última llamada: ${c.time} (${c.duration} min)`;
  }

  summary.innerHTML = `
    Registros emocionales: ${data.moods.length}<br>
    Llamadas registradas: ${data.calls.length}
  `;
}

function exportData(){
  const blob = new Blob([JSON.stringify(data)],{type:"application/json"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="mi_app_personal.json";
  a.click();
}

function importData(){
  fileInput.click();
}

fileInput.onchange = e=>{
  const file=e.target.files[0];
  const reader=new FileReader();
  reader.onload=()=>{ data=JSON.parse(reader.result); save(); };
  reader.readAsText(file);
};

newQuote();
updateUI();
</script>

</body>
</html>
